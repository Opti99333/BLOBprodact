"use client";import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import{addPropertyControls,ControlType,RenderTarget}from"framer";import{m,useInView,LazyMotion,domAnimation}from"framer-motion";import{useRef}from"react";// --------------------------------------------------
// // FRAMER PROPERTY CONTROLS // -------------------------------------------------- // const defaultData=[{value:100,color:"#f0591a",hoverColor:"#e84602"},{value:30,color:"#FF9F1C",hoverColor:"#ff9300"},{value:20,color:"#2EC4B6",hoverColor:"#059688"},{value:10,color:"#666666",hoverColor:"#4d4d4d"},{value:5,color:"#d3d3d3",hoverColor:"#b3b3b3"}];addPropertyControls(SimplePieChartFramer,{data:{type:ControlType.Array,title:"Data",control:{type:ControlType.Object,controls:{value:{type:ControlType.Number,defaultValue:25},color:{type:ControlType.Color,defaultValue:"#f0591a"},hoverColor:{type:ControlType.Color,defaultValue:"#e84602"}}},defaultValue:defaultData},inViewAnimation:{type:ControlType.Object,title:"In
View Animation",controls:{once:{type:ControlType.Boolean,title:"Once",defaultValue:true,description:"If yes, the animation will only play once."},amount:{type:ControlType.Number,title:"Amount",defaultValue:.5,min:0,max:1,description:"The amount of the
component that must be in view to trigger the animation."},transition:{type:ControlType.Transition,title:"Transition",defaultValue:{duration:.3,ease:"easeOut"}},delayBetweenValues:{type:ControlType.Number,title:"Delay Between Values",defaultValue:.05,min:0,max:1,step:.01}},defaultValue:{once:true,amount:.5,transition:{duration:.3,ease:"easeOut"},delayBetweenValues:.05}},hoverAnimation:{type:ControlType.Object,title:"Hover
Animation",controls:{scale:{type:ControlType.Number,title:"Scale",min:0,max:5,step:.01,defaultValue:1.025},transition:{type:ControlType.Transition,title:"Transition",defaultValue:{duration:.1,ease:"easeOut"}}},defaultValue:{scale:1.025,transition:{duration:.1,ease:"easeOut"}}},donut:{type:ControlType.Boolean,title:"Donut
Style",defaultValue:false},donutSize:{type:ControlType.Number,title:"Donut Size",defaultValue:50,min:0,max:100,step:1,hidden:props=>!props.donut},donutCircleColor:{type:ControlType.Color,title:"Donut Center Color",defaultValue:"#131313",hidden:props=>!props.donut},gapAngle:{type:ControlType.Number,title:"Gap",defaultValue:.5,min:0,max:10,step:.01},stroke:{type:ControlType.Object,title:"Stroke",controls:{width:{type:ControlType.Number,title:"Width",defaultValue:1,min:0,max:10,step:.5},color:{type:ControlType.Color,title:"Color",defaultValue:"#131313"}},defaultValue:{width:1,color:"#131313"}}});//
-------------------------------------------------- // // MAIN COMPONENT // -------------------------------------------------- // /** * @Copyright Â© David McBacon | Bachoff Studio * @framerSupportedLayoutWidth any-prefer-fixed * @framerSupportedLayoutHeight
any-prefer-fixed * @framerIntrinsicHeight 400 * @framerIntrinsicWidth 400 * @framerDisableUnlink */export default function SimplePieChartFramer(props){const isOnFramerCanvas=RenderTarget.hasRestrictions();const ref=useRef(null);const isInView=useInView(ref,{once:props.inViewAnimation.once,amount:props.inViewAnimation.amount});//
after one Framer update, the data is empty on canvas, even when we have data in the property panel // this is a workaround to ensure that the data is always available const correctData=props.data.length===0?defaultData:props.data;// Calculate total from
raw values const total=correctData.reduce((sum,item)=>sum+item.value,0);// Keep track of current angle for cumulative rotation let currentAngle=0;return /*#__PURE__*/_jsx(LazyMotion,{features:domAnimation,children:/*#__PURE__*/_jsx("div",{style:{padding:"20px",width:"100%",height:"100%"},children:/*#__PURE__*/_jsxs("svg",{ref:ref,width:"100%",height:"100%",viewBox:`0
0 100 100`,style:{overflow:"visible"},children:[correctData.map((segment,index)=>{// Calculate path data with current accumulated angle const pathData=calculatePathData(segment.value,total,currentAngle+props.gapAngle/2,props.gapAngle,correctData.length);//
Update the accumulated angle for the next segment const segmentAngle=segment.value/total*(360-props.gapAngle*correctData.length)+props.gapAngle;currentAngle+=segmentAngle;return /*#__PURE__*/_jsx(m.path,{d:pathData,stroke:props.stroke.color,strokeWidth:props.stroke.width,initial:{scale:isOnFramerCanvas?1:0,opacity:1,fill:segment.color},whileHover:{scale:props.hoverAnimation.scale,fill:segment.hoverColor,transition:props.hoverAnimation.transition},animate:{scale:isInView?1:0,opacity:1,fill:segment.color},transition:{scale:{...props.inViewAnimation.transition,delay:index*props.inViewAnimation.delayBetweenValues},opacity:{...props.inViewAnimation.transition,delay:index*props.inViewAnimation.delayBetweenValues},fill:{duration:.1}}},index);}),props.donut&&/*#__PURE__*/_jsx(m.circle,{cx:100/2,cy:100/2,r:props.donutSize/2,fill:props.donutCircleColor,//
initial={{ scale: isOnFramerCanvas ? 1 : 0 }} // animate={{ scale: isInView ? 1 : 0 }} transition:props.inViewAnimation.transition,style:{scale:isInView||isOnFramerCanvas?1:0}})]})})});}SimplePieChartFramer.displayName="PIE & DONUT CHART - BACHOFF STUDIO";//
-------------------------------------------------- // // HELPER FUNCTIONS // -------------------------------------------------- // const calculatePathData=(value,total,startAngleOffset,gapAngle,dataLength)=>{const radius=(100-1)/2;const centerX=100/2;const
centerY=100/2;// Adjust the percentage calculation to account for gaps const totalGapDegrees=gapAngle*dataLength;const availableDegrees=360-totalGapDegrees;const percentage=value/total*100;const angle=percentage/100*availableDegrees;// Calculate the angle
for this segment const startAngle=-90+startAngleOffset;const endAngle=startAngle+angle-gapAngle/2// Subtract half gap at end ;// Convert angles to radians const startRad=startAngle*Math.PI/180;const endRad=endAngle*Math.PI/180;// Calculate start and end
points const x1=centerX+radius*Math.cos(startRad);const y1=centerY+radius*Math.sin(startRad);const x2=centerX+radius*Math.cos(endRad);const y2=centerY+radius*Math.sin(endRad);// Determine if the arc should be drawn the long way around const largeArcFlag=angle>180?1:0;return`M
${centerX},${centerY} L ${x1},${y1} A ${radius},${radius} 0 ${largeArcFlag} 1 ${x2},${y2} Z`;}; export const __FramerMetadata__ = {"exports":{"default":{"type":"reactComponent","name":"SimplePieChartFramer","slots":[],"annotations":{"framerIntrinsicHeight":"400","framerSupportedLayoutHeight":"any-prefer-fixed","framerSupportedLayoutWidth":"any-prefer-fixed","framerContractVersion":"1","framerIntrinsicWidth":"400","framerDisableUnlink":""}},"__FramerMetadata__":{"type":"variable"}}}
//# sourceMappingURL=./Simple_Pie_Chart.map